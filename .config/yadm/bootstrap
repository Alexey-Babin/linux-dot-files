#!/bin/bash

mkdir -p "$HOME/bin"
mkdir -p "$HOME/programs"
mkdir -p "$HOME/.local/bin"

[ "$(whoami)" != "root" ] && SUDO=sudo

"$SUDO" apt update \
  && "$SUDO" apt upgrade -y \
  && "$SUDO" apt dist-upgrade -y

source "$HOME"/.config/yadm/bootstrap-packages

source "$HOME"/.config/yadm/bootstrap-rust

source "$HOME"/.config/yadm/bootstrap-zsh

source "$HOME"/.config/yadm/bootstrap-local


# Finalizing - clean after all installation
"$SUDO" apt autoremove -y
[[ -n "$(sudo deborphan --guess-common)" ]] && \
  "$SUDO" deborphan --guess-common | xargs "$SUDO" apt purge -y

"$SUDO" update-alternatives --set editor /usr/bin/vim.basic
