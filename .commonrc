#!/bin/sh
# Tune manuals
export MANPATH="/usr/local/man:$MANPATH"

# Fuzzy finder configuration ()
FD_OPTIONS="--follow --hidden --exclude .git --exclude node_modules"
export FZF_DEFAULT_OPTS="                                           \
    --no-mouse --height 50% -1                                      \
	--reverse --multi --inline-info                                 \
    --preview='[[ \$(file --mime {}) =~ binary ]] && echo {} is a binary file || (batcat --style=numbers --color=always {} || cat {}) 2> /dev/null | head -100' \
	--preview-window='right:hidden:wrap' \
	--bind='f3:execute(batcat --style=numbers {} || less -f {}),f2:toggle-preview,ctrl-d:half-page-down,ctrl-u:half-page-up,ctrl-a:select-all+accept,ctrl-y:execute-silent(echo {+} | pbcopy)'"

export FZF_DEFAULT_COMMAND="fddfind . $HOME"
export FZF_CTRL_T_COMMAND="fdfind  $FD_OPTIONS"
export FZF_ALT_C_COMMAND="fdfind --type d $FD_OPTIONS"
export FZF_CTRL_R_OPTS="                                            \
    --preview 'echo -E {}' --preview-window up:3:hidden:wrap        \
    --bind 'ctrl-/:toggle-preview'                                  \
    --bind 'ctrl-y:execute-silent(echo -n {2..} | pbcopy)+abort'    \
    --color header:italic                                           \
    --header 'Press Ctrl-Y to copy command into clipboard'"

# Pagers: less, bat etc...
# make less more friendly for non-text input files, see lesspipe(1)
if test -x /usr/bin/lesspipe; then
    eval "$(SHELL=/bin/sh lesspipe)"
fi

export PAGER="less"
# export LESSOPEN="| ~/.lessfilter %s"
export LESS='-r'
export MANPAGER="sh -c 'col -bx | batcat -l man -p'"
export BAT_PAGER="less -RF"
export EDITOR='vim'
export HISTCONTROL=ignoredups

# enable color support of ls and also add handy aliases
if test -x /usr/bin/dircolors; then
    if test -r ~/.dircolors; then
        eval "$(dircolors -b ~/.dircolors)" 
    else 
        eval "$(dircolors -b)"
    fi
    alias ls='ls --color=auto'
    alias dir='dir --color=auto'
    alias vdir='vdir --color=auto'

    alias grep='grep --color=auto'
    alias fgrep='fgrep --color=auto'
    alias egrep='egrep --color=auto'
fi

# Date and Timezone, Lang, Locale etc.
export TZ='Europe/Moscow'
export LANG=en_US.UTF-8

if test -f "$HOME"/.aliases; then
    # shellcheck source=/dev/null
    . "$HOME/.aliases"
fi

export PATH="$HOME/scripts:$HOME/bin:/usr/local/bin:/usr/local/pgsql/bine:$PATH"

# shellcheck source=/dev/null
[ -f "$HOME/.cargo/env" ] && . "$HOME/.cargo/env"

# #colored GCC warnings and errors
export GCC_COLORS='error=01;31:warning=01;35:note=01;36:caret=01;32:locus=01:quote=01'


